(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{600:function(s,n,a){"use strict";a.r(n);var t=a(9),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("此文用来记录、备忘transmission服务器的搭建。主要涉及到Linux文件系统权限的知识。")]),s._v(" "),a("h3",{attrs:{id:"准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),a("p",[s._v("一个headless的，NAT类型良好的的树莓派。")]),s._v(" "),a("h3",{attrs:{id:"安装transmission"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装transmission"}},[s._v("#")]),s._v(" 安装transmission")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" upgrade\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" transmission-daemon\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("先停止"),a("code",[s._v("trasmission-daemon")]),s._v("的后台运行，因为如果在其运行时修改配置文件，会被其自动复位，导致修改无效。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop transmission-daemon\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("用"),a("code",[s._v("mkdir")]),s._v("创建一个自己想用来作为torrent下载目的地的文件夹。并修改其用户权限：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R pi:pi /home/pi/你的文件夹目录\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("注：这里是说把目录的拥有权交给pi组的pi用户。如果你想用其他组的用户请酌情修改。")])]),s._v(" "),a("li",[a("p",[s._v("修改transmission的配置文件：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/transmission-daemon/settings.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("​\t我认为最需要关注的修改项为：")]),s._v(" "),a("ol",[a("li",[s._v("rpc-password和rpc-username。（这两项是网页控制面板的登陆账号和密码，如果你有一定安全隐私考虑，一定会要修改）（默认密码是哈希码，你可以直接替换成你想要的明文，重新启动transmission后软件会自动生成并替换为新的哈希码👌）")]),s._v(" "),a("li",[s._v("rpc-whitelist。（改为你自己的内网网段，如"),a("code",[s._v("192.168.0.*")]),s._v("，不然控制面板会返回403）")])])]),s._v(" "),a("li",[a("p",[s._v("将修改过的配置文件引用到"),a("code",[s._v("pi")]),s._v("家目录里的配置目录下，因为transmission会使用指定的（非默认）用户家目录下的配置文件，但其并不会自动生成，所以要进行如下配置：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("首先，获取"),a("code",[s._v("/etc/")]),s._v("目录下配置文件的权限：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R pi:pi /etc/transmission-daemon\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("将文件链接到家目录下，并把权限继续分配给pi用户：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /home/pi/.config/transmission-daemon/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /etc/transmission-daemon/settings.json /home/pi/.config/transmission-daemon/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R pi:pi /home/pi/.config/transmission-daemon/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("修改系统守护程序的运行用户：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/init.d/transmission-daemon\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/systemd/system/multi-user.target.wants/transmission-daemon.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("分别修改上述文件里"),a("code",[s._v("user")]),s._v("("),a("code",[s._v("USER")]),s._v(")字段的值，改为"),a("code",[s._v("pi")]),s._v("（或你之前修改目录权限时所指定的用户）")]),s._v(" "),a("p",[s._v("修改结束之后，重新加载"),a("code",[s._v("systemctl")]),s._v("配置，并启动守护程序")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start transmission-daemon\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("使用网页控制面板进一步配置：")]),s._v(" "),a("ol",[a("li",[s._v("登陆网址为树莓派的ip➕"),a("code",[s._v("/etc/transmission-daemon")]),s._v("中的端口号（默认为9091）")]),s._v(" "),a("li",[s._v("输入"),a("code",[s._v("/etc/transmission-daemon")]),s._v("中的用户名和密码以登陆")]),s._v(" "),a("li",[s._v("点击左下角的🔧标志来配置，将下载目录修改为树莓派之前指定的下载目录")]),s._v(" "),a("li",[s._v("bt的话在peer界面将option全部选上✅，pt则全部不勾选。")]),s._v(" "),a("li",[s._v("点击左上角，输入链接或者上传种子文件就可开始下载了。下载完之后，服务器会自动做种。")])])])]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"/Users/zhy/projects/blogs/.vuepress/public/transmission.png"}}),s._v(" "),a("p",[s._v("Enjoy!!!🎉")])])}),[],!1,null,null,null);n.default=e.exports}}]);